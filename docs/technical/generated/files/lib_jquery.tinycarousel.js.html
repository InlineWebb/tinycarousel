<h1 class="file-heading">File: lib/jquery.tinycarousel.js</h1>

<div class="file">
    <pre class="code prettyprint linenums">
;(function(factory) {
    if(typeof define === &#x27;function&#x27; &amp;&amp; define.amd) {
        define([&#x27;jquery&#x27;], factory);
    }
    else if(typeof exports === &#x27;object&#x27;) {
        module.exports = factory(require(&quot;jquery&quot;));
    }
    else {
        factory(jQuery);
    }
}
(function($) {
    var pluginName = &quot;tinycarousel&quot;
    ,   defaults   =
        {
            start:          0
        ,   axis:           &quot;x&quot;
        ,   buttons:        true
        ,   bullets:        false
        ,   interval:       false
        ,   intervalTime:   3000
        ,   animation:      true
        ,   animationTime:  1000
        ,   infinite:       true
        }
    ;

    function Plugin($container, options) {
        /**
         * The options of the carousel extend with the defaults.
         *
         * @property options
         * @type Object
         * @default defaults
         */
        this.options = $.extend({}, defaults, options);

        /**
         * @property _defaults
         * @type Object
         * @private
         * @default defaults
         */
        this._defaults = defaults;

        /**
         * @property _name
         * @type String
         * @private
         * @final
         * @default &#x27;tinycarousel&#x27;
         */
        this._name = pluginName;

        var self      = this
        ,   $viewport = $container.find(&quot;.viewport:first&quot;)
        ,   $overview = $container.find(&quot;.overview:first&quot;)
        ,   $slides   = null
        ,   $next     = $container.find(&quot;.next:first&quot;)
        ,   $prev     = $container.find(&quot;.prev:first&quot;)
        ,   $bullets  = $container.find(&quot;.bullet&quot;)

        ,   viewportSize    = 0
        ,   contentStyle    = {}
        ,   slidesVisible   = 0
        ,   slideSize       = 0
        ,   slideIndex      = 0

        ,   isHorizontal  = this.options.axis === &#x27;x&#x27;
        ,   sizeLabel     = isHorizontal ? &quot;Width&quot; : &quot;Height&quot;
        ,   posiLabel     = isHorizontal ? &quot;left&quot; : &quot;top&quot;
        ,   intervalTimer = null
        ;

        /**
         * The index of the current slide.
         *
         * @property slideCurrent
         * @type Number
         * @default 0
         */
        this.slideCurrent = 0;

        /**
         * The number of slides the carousel is currently aware of.
         *
         * @property slidesTotal
         * @type Number
         * @default 0
         */
        this.slidesTotal = 0;

        /**
         * If the interval is running the value will be true.
         *
         * @property intervalActive
         * @type Boolean
         * @default false
         */
        this.intervalActive = false;

        /**
         * @method _initialize
         * @private
         */
        function _initialize() {
            self.update();
            self.move(self.slideCurrent);

            _setEvents();

            return self;
        }

        /**
         * Adds 1 or more of a given item to the cart, if the chosen quantity
         * is available. If not, none are added.
         *
         * @method update
         * @chainable
         */
        this.update = function() {
            $overview.find(&quot;.mirrored&quot;).remove();

            $slides           = $overview.children();
            viewportSize      = $viewport[0][&quot;offset&quot; + sizeLabel];
            slideSize         = $slides.first()[&quot;outer&quot; + sizeLabel](true);
            self.slidesTotal  = $slides.length;
            self.slideCurrent = self.options.start || 0;
            slidesVisible     = Math.ceil(viewportSize / slideSize);

            $overview.append($slides.slice(0, slidesVisible).clone().addClass(&quot;mirrored&quot;));
            $overview.css(sizeLabel.toLowerCase(), slideSize * (self.slidesTotal + slidesVisible));

            _setButtons();

            return self;
        };

        /**
         * @method _setEvents
         * @private
         */
        function _setEvents() {
            if(self.options.buttons) {
                $prev.click(function() {
                    self.move(--slideIndex);

                    return false;
                });

                $next.click(function() {
                    self.move(++slideIndex);

                    return false;
                });
            }

            $(window).resize(self.update);

            if(self.options.bullets) {
                $container.on(&quot;click&quot;, &quot;.bullet&quot;, function() {
                    self.move(slideIndex = +$(this).attr(&quot;data-slide&quot;));

                    return false;
                });
            }
        }


        /**
         * If the interval is stoped start it.
         *
         * @method start
         * @chainable
         */
        this.start = function() {
            if(self.options.interval) {
                clearTimeout(intervalTimer);

                self.intervalActive = true;

                intervalTimer = setTimeout(function() {
                    self.move(++slideIndex);

                }, self.options.intervalTime);
            }

            return self;
        };

        /**
         * If the interval is running stop it.
         *
         * @method start
         * @chainable
         */
        this.stop = function() {
            clearTimeout(intervalTimer);

            self.intervalActive = false;

            return self;
        };

        /**
         * Move to a specific slide.
         *
         * @method move
         * @chainable
         */
        this.move = function(index) {
            slideIndex        = index || self.slideCurrent;
            self.slideCurrent = slideIndex % self.slidesTotal;

            if(slideIndex &lt; 0) {
                self.slideCurrent = slideIndex = self.slidesTotal - 1;
                $overview.css(posiLabel, -(self.slidesTotal) * slideSize);
            }

            if(slideIndex &gt; self.slidesTotal) {
                self.slideCurrent = slideIndex = 1;
                $overview.css(posiLabel, 0);
            }

            contentStyle[posiLabel] = -slideIndex * slideSize;

            $overview.animate(
                contentStyle
            ,   {
                    queue    : false
                ,   duration : self.options.animation ? self.options.animationTime : 0
                ,   always : function() {
                       /**
                        * The move event will trigger when the carousel slides to a new slide.
                        *
                        * @event move
                        */
                        $container.trigger(&quot;move&quot;, [$slides[self.slideCurrent], self.slideCurrent]);
                    }
                });

            _setButtons();
            self.start();

            return self;
        };

        /**
         * @method _setButtons
         * @private
         */
        function _setButtons() {
            if(self.options.buttons &amp;&amp; !self.options.infinite) {
                $prev.toggleClass(&quot;disable&quot;, self.slideCurrent &lt;= 0);
                $next.toggleClass(&quot;disable&quot;, self.slideCurrent &gt;= self.slidesTotal - slidesVisible);
            }

            if(self.options.bullets) {
                $bullets.removeClass(&quot;active&quot;);
                $($bullets[self.slideCurrent]).addClass(&quot;active&quot;);
            }
        }

        return _initialize();
    }

    /**
    * @class tinycarousel
    * @constructor
    * @param {Object} options
        @param {Number}  [options.start=0] The slide to start with.
        @param {String}  [options.axis=x] Vertical or horizontal scroller? ( x || y ).
        @param {Boolean} [options.buttons=true] Show previous and next navigation buttons.
        @param {Boolean} [options.bullets=false] Is there a page number navigation present?
        @param {Boolean} [options.interval=false] Move to another block on intervals.
        @param {Number}  [options.intervalTime=3000] Interval time in milliseconds.
        @param {Boolean} [options.animate=true] False is instant, true is animate.
        @param {Number}  [options.animationTime=1000] How fast must the animation move in ms?
        @param {Boolean} [options.infinite=true] Infinite carousel.
    */
    $.fn[pluginName] = function(options) {
        return this.each(function() {
            if(!$.data(this, &quot;plugin_&quot; + pluginName)) {
                $.data(this, &quot;plugin_&quot; + pluginName, new Plugin($(this), options));
            }
        });
    };
}));
    </pre>
</div>
